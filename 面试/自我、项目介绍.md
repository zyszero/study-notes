# 个人以及项目介绍

## 自我介绍

面试官，您好！我叫钟宇声。18年毕业于仲恺农业工程学院，毕业后就职于广东省电子商务认证有限公司，担任后端开发工程师。就职以来，主要参与过公司的两个核心产品的研发，分别是“数字证书认证系统”和“云密钥安全管理系统”，至今还在参与产品的版本迭代与维护，在团队中，属于主力开发人员之一。本人熟悉Java，熟练掌握Web开发技术，具备独自设计与研发小型系统的能力，希望应聘贵公司的Java开发工程师岗位。



## 项目介绍：

### NETCA数字证书认证系统

Situation - 在什么样的环境和背景下：

项目背景：公司是国内的CA机构，由于内部的CA运营平台依赖的基础设施，也就是数字证书认证系统，是购买自其他公司的产品，随着业务的发展，该基础设施预计在几年后便很难运营维护下去了，所以公司就打算结合多年运营CA的经验，以能够满足企业自建CA体系的需求为目标，自研“数字证书认证系统”，并作为公司的核心产品之一。

Task - 你要干什么样的事：

“NETCA数字证书认证系统”是由证书注册系统（RA）、证书认证系统（CA）、密钥管理系统（KM）和证书查询验证系统（LDAP、CRL和OCSP等）一套系统组建而成的。在整个产品初期，我参与了整套系统的架构设计以及技术选型，在产品研发阶段，则负责证书注册系统的搭研发以及其他系统部分核心模块的设计与开发。

Action - 你采取了什么样的行动和努力：

数字证书注册系统，主要负责证书申请者的信息录入、审核以及证书发放等工作，是CA的证书发放、管理的延伸。

整个系统由初始化系统、管理系统和证书接口服务三部分组成。三者我都以Spring Boot框架为基底，ORM框架采用MyBatis框架。

“1、采用Apahce Shiro权限框架，结合PKI认证技术，实现证书认证登录、操作记录不可抵赖以及权限控制等功能。”

管理系统的前端采用VUE框架来实现，后端的权限认证模块采用Apahce Shiro框架，并结合PKI认证技术，实现证书认证登录、操作记录的不可抵赖，以及权限控制。

实现细节：登录前，访问后端接口，获取一个随机数，前端通过调用用户的USBKey，对随机数等一些信息进行P7（PKCS#7）签名，将随机数、原文以及签名值发送到后台进行登录认证，后端将原文、签名值、随机数组成AuthenticationToken，然后在获取AuthenticationInfo，即调用doGetAuthenticationInfo会进行登录认证，即进行验签、校验证书有效期、校验证书链、然后通过证书校验用户是否存在、比对随机数操作，然后将操作员信息、签名值等组成SimpleAuthenticationInfo对象，来实现登录

权限认证 -》 基于角色来进行接口级别的权限控制



“2、负责 RA 对外证书接口服务的鉴权、防重放、限流等设计；对外提供不同消息协议的证书服务接口。”

如何对外提供不同的消息协议？

- 通过策略模式，实现CMP协议、JSON数据协议的HTTP（s）接口
  - 通过继承拓展Spring MVC的HandlerMethodArgumentResolver（方法参数解析器）和HandlerMethodReturnValueHandler（方法返回值处理器），结合拓展（继承）HttpMessageConverter，HttpMessageConverter内部对应不同的消息协议解析器，实现不同消息协议（不同的MediaType）对应的数据直接转换成业务对象

如何实现鉴权？

- 比对配置的通讯证书
- 验证签名
- 比对配置的开通接口

如何实现接口参数防篡改，接口调用防重放？

- 走HTTPS，数据加密传输
- 接口参数做签名，防篡改
- 基于时间戳（timestamp）和nonce(仅一次有效的随机字符串)的方案，来防止重放攻击
  - 单时间戳方案，缺点：在小于阈值的时间段内是可以进行重复请求的，该方案不能保证请求仅一次有效。
  - 单nonce（token）方案，缺点：nonce 会存储在缓存中，而且没有有效期设置，随着请求量的增加，缓存集合中 token 的数量会非常庞大，会占用系统的大量内存。

如何实现接口限流？

- 单体时，使用Guava中的RateLimiter
- 分布式，通过使用Redis来实现
- 也可通过Nginx来实现限流
- 限流算法
  - 漏桶算法
  - 令牌桶算法
  - 滑动时间窗口算法

"3、通过使用职责链设计模式来设计证书和 CRL 的签发流程，提升了签发流程的可拓展性。"

证书签发系统的核心模块。



“4、通过策略模式提升审计日志验证模块的拓展性，根据不同类型的日志，实现不同的日志验证策略。”

- 操作日志 - 直接简单的进行签名验证审计即可。
- 接口日志 - 不同消息协议下的接口日志，对应着不同的审计策略。



“5、OCSP 查询服务接口，预先产生 OCSP 响应数据，并将数据缓存至本地 GuavaCache 和 Redis，使用双缓存模式减少网络 I/O 请求，通过缓存有效降低 DB 压力，提升服务稳定性和并发量。”

压测数据：支持1.5k并发，平均响应以及中位数在1s内，95-99%均在1s内，压测时长120s，QPS预估1.7w。

存在“双写问题”，要怎么解决？



GuavaCache和Redis的缓存过期策略

- GuavaCache
- Redis



"6、日志上报模块设计实现使用了 Disruptor 作为缓冲上报的 buffer，通过 JMH 测试吞吐率比使 BlockingQueue 有 

20%的提升，并预研 Disruptor 相关底层，解决消费者的等待策略触发机器 CPU 满负载等问题。"

吞吐率上升的原因？Disruptor 底层实现？



消费者的等待策略触发机器 CPU 满负载，是指什么？



“7、系统间服务调用采用 gRPC+ProtoBuf 来实现，提升接口数据传输效率。 ”

gRPC是什么？



ProtoBuf 是什么？



Result - 最终得到了什么样的效果





### 云密钥安全管理系统

Situation - 在什么样的环境和背景下：

项目背景：

项目介绍：该系统主要目的是用于统一管理、维护用户密钥对的生命周期，向客户端应用、第三方系统提供签名验签、加解密、密钥授权等接口服务。主要保障相关服务操作的鉴权以及电子签名的合法性、不可抵赖性。



Task - 你要干什么样的事：

负责系统核心模块的设计与开发、落地系统高可用方案。



Action - 你采取了什么样的行动和努力：

“1、 通过使用桥接模式来设计实现用户身份认证模块，实现不同用户的多种认证方式，提升模块拓展性，避免继承层次的指数级爆炸。 ”



“2、 通过借鉴 JDBC 的设计，采用 Java SPI 机制来设计短信模块，实现不同客户接入不同短信平台的需求。”



“3、 通过自定义 MyBatis 插件+自定义注解，实现对用户敏感信息存储加密，读取解密的操作。”

- MyBatis的插件制作流程
- MyBatis的八股文

“4、通过使用 Google Guava EventBus 建立系统内的事件发布/订阅总线机制。”

- Guava EventBus的实现原理



"5、 通过采用 ActiveMQ + MQTT，实现对移动端进行消息推送等功能。"

- MQ的基本知识
- ActiveMQ的基本概念
- 



“6、 通过使用线程池和 Redis 分布式锁，实现证书批量申请、续期、注销、下载等功能。”

- 线程池的概念，应用场景（八股文）。

- Redis如何实现分布式锁？
  - 单实例
  - 多实例



“7、 落地高可用方案：通过 Nginx + Keepalived 实现服务器双机热备；MySQL 采用半同步复制机制进行主主互备； Redis 采用“一主一从三哨兵”的形式，实现高可用。”



Result - 最终得到了什么样的效果：

