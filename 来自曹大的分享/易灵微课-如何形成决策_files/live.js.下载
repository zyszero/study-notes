webpackJsonp([67],{22:function(e,t,n){"use strict";n.d(t,"i",function(){return u}),n.d(t,"j",function(){return s}),n.d(t,"h",function(){return l}),n.d(t,"c",function(){return f}),n.d(t,"g",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"k",function(){return v}),n.d(t,"l",function(){return E}),n.d(t,"a",function(){return w}),n.d(t,"b",function(){return _});var o=n(35),r=n.n(o),i=n(195),c=(n.n(i),n(65)),a=n.n(c),u=function(e,t){e&&("string"!=typeof t&&(t=a()(t)),window.localStorage.setItem(e,t))},s=function(e){if(e)try{var t=window.localStorage.getItem(e);return t||""}catch(e){return""}},l=function(e){e&&window.localStorage.removeItem(e)},f=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},d=function(e){var t=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null},m=function(e,t){if("jpg|jpeg|png|bmp|gif|webp".indexOf(e.value.substr(e.value.lastIndexOf(".")+1).toLowerCase())<0)return swal({title:"错误提醒",text:"您选中的文件不是图片，请重新选择",confirmButtonText:"知道了"});var t=Math.round(t/1024*100)/100;return console.log("filesize(kb)",t),!0},p=function(e,t){if("mp4|mov".indexOf(e.value.substr(e.value.lastIndexOf(".")+1).toLowerCase())<0)return swal({title:"错误提醒",text:"目前只支持mp4,mov格式的视频上传",confirmButtonText:"知道了"});var t=Math.round(t/1024*100)/100;return console.log("filesize(kb)",t),!(t>512e3)||swal({title:"错误提醒",text:"上传视频大小不能超过500M，请重新选择",confirmButtonText:"知道了"})},h=function(e,t){var t=Math.round(t/1024*100)/100;return!(t>5120)||swal({title:"错误提醒",text:"您选择的图片大小超过限制(最大为5M)，请重新选择",confirmButtonText:"知道了"})},v=function(e,t){var n=e.name;if("jpg|jpeg|png|bmp|gif|webp|txt|doc|docx|xls|ppt|zip|rar|gz".indexOf(n.substr(n.lastIndexOf(".")+1).toLowerCase())<0)return swal({title:"错误提醒",text:"您选中的文件类型非法，请重新选择",confirmButtonText:"知道了"});var t=Math.round(t/1024*100)/100;return t<=0?swal({title:"错误提醒",text:"您选择的文件大小内容为空，请重新选择",confirmButtonText:"知道了"}):!(t>20480)||swal({title:"错误提醒",text:"您选择的文件大小超过限制(最大为20M)，请重新选择",confirmButtonText:"知道了"})},E=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},w=function(e,t){return Array.isArray(t)?[].concat(r()(e),r()(t)):"[object Object]"==Object.prototype.toString.call(t)?[].concat(r()(e),[t]):void 0},_=function(e){for(var t=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o>=1&&o<=126||65376<=o&&o<=65439?t++:t+=2}return t}},229:function(e,t){},230:function(e,t){!function(){var e,t,n,o=document.documentElement,r=document.createElement("style"),i=document.createElement("style"),c=document.querySelector('meta[name="viewport"]'),a=!1,u=!0,s=navigator.platform,l={win:0==s.indexOf("Win"),mac:0==s.indexOf("Mac"),wx:"micromessenger"==navigator.userAgent.toLocaleLowerCase().match(/MicroMessenger/i),ipad:null!=navigator.userAgent.match(/iPad/i)};null==navigator.userAgent.match(/(iPhone|iPad|Android|ios)/i)&&(a=!0),u=l.wx,e=window.devicePixelRatio||1,t=a?75:o.clientWidth*e/10,n=1/e,a?(i.innerHTML="body{overflow-y: auto;}",o.firstElementChild.appendChild(i),o.getElementsByTagName("body")[0].setAttribute("class","body-pc")):(c.setAttribute("content","width="+e*o.clientWidth+",initial-scale="+n+",maximum-scale="+n+", minimum-scale="+n+",user-scalable=no"),o.setAttribute("data-dpr",e),o.getElementsByTagName("body")[0].setAttribute("class","is-mobile"),window.alert=function(e){var t=document.createElement("IFRAME");t.style.display="none",t.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(t),window.frames[0].window.alert(e),t.parentNode.removeChild(t)},window.confirm=function(e){var t=document.createElement("IFRAME");t.style.display="none",t.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(t);var n=window.frames[0].window.confirm(e);return t.parentNode.removeChild(t),n}),r.innerHTML="html{font-size:"+t+"px!important;}",o.firstElementChild.appendChild(r),window.rem2px=function(e){return(e=parseFloat(e))*t},window.px2rem=function(e){return(e=parseFloat(e))/t},window.__scale=n,window.dpr=e,window.rem=t,window.isPC=a,window.isWeiXin=u}()},232:function(e,t){},249:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=(n(4),n(22),n(379)),r=n.n(o),i=function(){(new r.a).enable()}},250:function(e,t,n){"use strict";var o,o=function(e){return n.e(1).then(function(){return e(n(399))}.bind(null,n)).catch(n.oe)};t.a=[{path:"/",name:"index",component:o}]},251:function(e,t,n){"use strict";var o=n(15),r=n.n(o),i=n(263),c=n.n(i),a=n(35),u=n.n(a),s=n(4),l=n(34),f=n(279),d=n(280);s.default.use(l.b);var m={headerTitle:"授课区",loadShow:!0,menuShow:!1,isOwner:!1,commentShow:!1,commentType:1,refundShow:!1,evaluateShow:!1,isHeader:!0,userInfo:null,lessonInfo:null,teacherInfo:null,messageInfo:[],commentMessageInfo:[],recording:!1,audioPause:!1,sending:!1,sendWidth:"0",loadingImg:"static/_static/live/img/loading.gif",userAvatar:null,playingAudio:null,cancleRecord:!1,blobRecord:null,isEvaluate:!1,boxMoreShow:!1,recorderStatus:!1,recorderTimer:"0:01",statsInfo:{},prepareList:[],recorderFold:!1,videoPlaying:!1,audioCompressComplete:!1,footerConf:null,fullMember:!1,bookmarkList:[],liveHost:"https://yike.fm/".replace(/\/$/,""),studentHost:"https://student.yike.fm/".replace(/\/$/,"?"),teacherHost:"https://teacher.yike.fm/".replace(/\/$/,""),assetsHost:"https://assets.yike.fm/"},p={UPDATE_TITLE:function(e,t){e.headerTitle=t},UPDATE_LOADING:function(e,t){e.loadShow=t},UPDATE_RECORDING:function(e,t){e.recording=t},UPDATE_BLOB_RECORDING:function(e,t){e.blobRecord=t},UPDATE_SENDING:function(e,t){e.sending=t},UPDATE_SENDING_WIDTH:function(e,t){e.sendWidth=t},UPDATE_MESSAGE:function(e,t){if(console.log("update message",t),Array.isArray(t)){var n=!0,o=!1,r=void 0;try{for(var i,a=c()(t);!(n=(i=a.next()).done);n=!0){var s=i.value;"TIMCustomElem"==s.content[0].type&&"MARK"==s.content[0].custom[0].type&&(s.isSystem=!0,s.bookmark=s.content[0].custom[0],s.bookmark&&e.bookmarkList.push(s.bookmark)),"TIMCustomElem"==s.content[0].type&&"ADMIRE"==s.content[0].custom[0].type&&(s.isSystem=!0,s.admire=s.content[0].custom[0])}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}console.log("array",t),e.messageInfo=[].concat(u()(e.messageInfo),u()(t))}else"[object Object]"==Object.prototype.toString.call(t)&&("TIMCustomElem"==t.content[0].type&&"MARK"==t.content[0].custom[0].type&&(t.isSystem=!0,t.bookmark=t.content[0].custom[0],t.bookmark&&e.bookmarkList.push(t.bookmark)),"TIMCustomElem"==t.content[0].type&&"ADMIRE"==t.content[0].custom[0].type&&(t.isSystem=!0,t.admire=t.content[0].custom[0]),console.log("object",t),e.messageInfo=[].concat(u()(e.messageInfo),[t]))},UPDATE_HISTORY_MESSAGE:function(e,t){if(console.log("update history message",t),Array.isArray(t)){console.log("foo");var n=!0,o=!1,r=void 0;try{for(var i,a=c()(t);!(n=(i=a.next()).done);n=!0){var s=i.value;"TIMCustomElem"==s.content[0].type&&"MARK"==s.content[0].custom[0].type&&(s.isSystem=!0,s.bookmark=s.content[0].custom[0],s.bookmark&&e.bookmarkList.push(s.bookmark))}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}e.messageInfo=[].concat(u()(t),u()(e.messageInfo))}else"[object Object]"==Object.prototype.toString.call(t)?(console.log("bar"),"TIMCustomElem"==t.content[0].type&&"MARK"==t.content[0].custom[0].type&&(t.isSystem=!0,t.bookmark=t.content[0].custom[0],t.bookmark&&e.bookmarkList.push(t.bookmark)),e.messageInfo=[t].concat(u()(e.messageInfo))):console.log("cuz")},UPDATE_COMMENT_MESSAGE:function(e,t){Array.isArray(t)?e.commentMessageInfo=[].concat(u()(e.commentMessageInfo),u()(t)):"[object Object]"==Object.prototype.toString.call(t)&&(e.commentMessageInfo=[].concat(u()(e.commentMessageInfo),[t]))},UPDATE_HISTORY_COMMENT_MESSAGE:function(e,t){Array.isArray(t)?e.commentMessageInfo=[].concat(u()(t),u()(e.commentMessageInfo)):"[object Object]"==Object.prototype.toString.call(t)&&(e.commentMessageInfo=[t].concat(u()(e.commentMessageInfo)))},RESET_COMMENT_MESSAGE:function(e,t){e.commentMessageInfo=[].concat(u()(t))},UPDATE_MENUSHOW:function(e,t){e.menuShow=t},UPDATE_COMMETN_SHOW:function(e,t){e.commentShow=t},UPDATE_COMMETN_TYPE:function(e,t){e.commentType=t},UPDATE_REFUND_SHOW:function(e,t){e.refundShow=t},UPDATE_ISOWNER:function(e,t){e.isOwner=t},UPDATE_USERINFO:function(e,t){e.userInfo=r()({},e.userInfo,t)},UPDATE_LESSONINFO:function(e,t){e.lessonInfo=r()({},e.lessonInfo,t)},UPDATE_TEACHERINFO:function(e,t){e.teacherInfo=r()({},e.teacherInfo,t)},UPDATE_AVATAR:function(e,t){e.loadingImg=t},UPDATE_USER_AVATAR:function(e,t){e.userAvatar=r()({},e.userAvatar,t)},UPDATE_PLAYER:function(e,t){e.playingAudio=t},UPDATE_CANCLE_RECORD:function(e,t){e.cancleRecord=t},UPDATE_EVALUATE_SHOW:function(e,t){e.evaluateShow=t},UPDATE_IS_EVALUATE:function(e,t){e.isEvaluate=t},UPDATE_BOX_MORE:function(e,t){e.boxMoreShow=t},UPDATE_RECORDER_STATUS:function(e,t){e.recorderStatus=t},UPDATE_RECORDER_TIMER:function(e,t){e.recorderTimer=t},UPDATE_STATSINFO:function(e,t){e.statsInfo=r()({},t)},UPDATE_AUDIO_COMPLETE:function(e,t){e.audioCompressComplete=t},UPDATE_PREPARE_LIST:function(e,t){e.prepareList=[].concat(u()(t))},UPDATE_RECORDER_FOLD:function(e,t){e.recorderFold=t},UPDATE_VIDEO_STATUS:function(e,t){e.videoPlaying=t},UPDATE_FOOTER_CONF:function(e,t){e.footerConf=t},UPDATE_FULL_MEMBER:function(e,t){e.fullMember=t}};t.a=new l.b.Store({state:m,mutations:p,actions:f,getters:d})},261:function(e,t,n){n(373);var o=n(21)(n(267),n(392),null,null);e.exports=o.exports},266:function(e,t,n){n(375);var o=n(21)(n(269),n(394),"data-v-58660e9d",null);e.exports=o.exports},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),r=n.n(o),i=n(380),c=n.n(i),a=n(266),u=n.n(a),s=n(34);window._canKick_=!1,t.default={name:"app",components:{vHeader:c.a,vLoading:u.a},computed:r()({},n.i(s.c)(["loadShow"])),created:function(){},data:function(){return{isPC:isPC,isWeiXin:isWeiXin}},methods:{}}},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),r=n.n(o),i=n(34);t.default={name:"v-header",components:{},data:function(){return{isPC:isPC,show:!1}},computed:r()({},n.i(i.c)(["teacherHost","headerTitle","menuShow","isOwner"])),methods:{isShow:function(){this.$store.commit("UPDATE_MENUSHOW")},backToHome:function(){window.location.href=this.teacherHost}}}},269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-loading",props:{show:{type:Boolean}},created:function(){}}},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(62),i=n(61),c=n(60),a=n.n(c),u=n(261),s=n.n(u),l=n(251),f=n(250),d=n(249),m=n(230),p=(n.n(m),n(56)),h=(n.n(p),n(58)),v=(n.n(h),n(59)),E=(n.n(v),n(57)),w=(n.n(E),n(232));n.n(w);"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){a.a.attach(document.body)},!1),o.default.use(r.a),o.default.use(i.a),n.i(d.a)();var _=new r.a({linkActiveClass:"active",routes:f.a});new o.default({el:"#app",store:l.a,router:_,template:"<App/>",components:{App:s.a}})},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"fetchHistory",function(){return s}),n.d(t,"fetchRefund",function(){return l}),n.d(t,"fetchStartComment",function(){return f}),n.d(t,"fetchEndLesson",function(){return d}),n.d(t,"fetchEvaluate",function(){return m}),n.d(t,"fetchWXConfig",function(){return p}),n.d(t,"fetchQiniuToken",function(){return h}),n.d(t,"fetchAudioCheck",function(){return v}),n.d(t,"fetchQuote",function(){return E}),n.d(t,"fetchLiveForbid",function(){return w}),n.d(t,"fetchLivePrepareSend",function(){return _}),n.d(t,"fetchInviteGuest",function(){return A}),n.d(t,"fetchExistsTail",function(){return T});var o=n(10),r=n.n(o),i=n(4),c="https://yike.fm/".replace(/\/$/,""),a=function(e,t){var n=e.url,o=e.query,c=void 0;if(o){if("[object Object]"==Object.prototype.toString.call(o)){var a="";for(var u in o)a=""+(a?a+"&":a)+u+"="+o[u];o=a}c=n+"?"+o}else c=""+n;return i.default.http.get(c).then(function(e){return e.status>=200&&e.status<300?e.data:r.a.reject(new Error(e.status))})},u=function(e,t){var n=e.url,o=e.body,c=n;return i.default.http.post(c,o,{emulateJSON:!0,withCredentials:!0}).then(function(e){return e.status>=200&&e.status<300?e.data:r.a.reject(new Error(e.status))})},s=function(e,t){e.commit;return a({url:c+"/live-slice-tim.api",query:t}).then(function(e){return 0==e.error?r.a.resolve(e.data):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},l=function(e,t){e.commit;return u({url:c+"/lesson-refund-freely.api",body:t}).then(function(e){return 0==e.error?r.a.resolve():r.a.reject(e.error)}).catch(function(e){return r.a.reject(e)})},f=function(e,t){var n=e.commit,o=c+"/lesson-repose.api";return n("UPDATE_LOADING",!0),u({url:o,body:t}).then(function(e){return n("UPDATE_LOADING",!1),0==e.error?r.a.resolve():r.a.reject(e.error)}).catch(function(e){return r.a.reject(e)})},d=function(e,t){var n=e.commit,o=c+"/lesson-finish.api";return n("UPDATE_LOADING",!0),u({url:o,body:t}).then(function(e){return n("UPDATE_LOADING",!1),0==e.error?r.a.resolve():r.a.reject(e.error)}).catch(function(e){return r.a.reject(e)})},m=function(e,t){var n=e.commit,o=c+"/lesson-rating.api";return n("UPDATE_LOADING",!0),u({url:o,body:t}).then(function(e){return n("UPDATE_LOADING",!1),0==e.error?r.a.resolve():r.a.reject(e.error)}).catch(function(e){return r.a.reject(e)})},p=function(e,t){e.commit;return a({url:c+"/weixin-jsConfig.api",query:t}).then(function(e){return 0==e.error?r.a.resolve(e.data):r.a.reject(new Error("Fetch_WX_Config failure"))}).catch(function(e){return r.a.reject(e)})},h=function(e,t){e.commit;return a({url:c+"/live-audio_draft.api",query:t}).then(function(e){return 0==e.error?r.a.resolve(e.data):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},v=function(e,t){e.commit;return a({url:c+"/live-audio_check.api",query:t}).then(function(e){return 0==e.error||1==e.error||2==e.error?r.a.resolve(e):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},E=function(e,t){e.commit;return u({url:c+"/live-quote-text.api",body:t}).then(function(e){return 0==e.error?r.a.resolve(e):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},w=function(e,t){e.commit;return u({url:c+"/live-forbid_speak.api",body:t}).then(function(e){return 0==e.error?r.a.resolve(e):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},_=function(e,t){e.commit;return u({url:c+"/live-prepare-send.api",body:t}).then(function(e){return 0==e.error?r.a.resolve(e):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},A=function(e,t){e.commit;return u({url:c+"/live-invite.api",body:t}).then(function(e){return 0==e.error?r.a.resolve(e.data):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})},T=function(e,t){e.commit;return a({url:c+"/live-conf.api",query:t}).then(function(e){return 0==e.error?r.a.resolve(e.data):r.a.reject(e)}).catch(function(e){return r.a.reject(e)})}},280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getHeaderTitle",function(){return o}),n.d(t,"getLoadShow",function(){return r});var o=function(e){return e.headerTitle},r=function(e){return e.loadShow}},370:function(e,t){},373:function(e,t){},375:function(e,t){},380:function(e,t,n){n(370);var o=n(21)(n(268),n(389),null,null);e.exports=o.exports},389:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow,expression:"menuShow"}],staticClass:"page-cover",on:{click:e.isShow}}),e._v(" "),e.isOwner||!e.isPC?n("header",{staticClass:"header",class:{show:e.menuShow},on:{click:e.isShow}},[n("header",{staticClass:"bar"},[n("div",{staticClass:"bar-nav back"},[n("span",{staticClass:"iconfont icon-open-left",on:{click:e.backToHome}})]),e._v(" "),n("div",{staticClass:"title"},[e._v(e._s(e.headerTitle))]),e._v(" "),e._m(0)])]):e._e()])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bar-nav more"},[n("span",{staticClass:"iconfont icon-dot-more"})])}]}},392:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",class:{"is-wx":e.isWeiXin,"is-pc":e.isPC}},[e.isWeiXin?e._e():n("v-header"),e._v(" "),n("v-loading",{attrs:{show:e.loadShow}}),e._v(" "),n("router-view")],1)},staticRenderFns:[]}},394:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"loading"},[e._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader-inner ball-pulse"},[n("div"),e._v(" "),n("div"),e._v(" "),n("div")])}]}},56:function(e,t){},57:function(e,t){},58:function(e,t){},59:function(e,t){}},[278]);
//# sourceMappingURL=live.js.map