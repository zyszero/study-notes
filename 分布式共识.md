# 分布式共识

什么是分布式共识？为什么要有分布式共识？

- 什么是共识？



分布式共识算法有哪些？

世界上只有一种共识协议，就是Paxos，其他所有共识算法都是Paxos的退化版本。——Mike Burrows，Google Chubby作者



什么是 Paxos 算法？

- Basic Paxos 的简介
- Multi Paxos 是什么？



分布式系统如何对某个值达成一致？

1. 如何选主（Leader Election）？



2. 如何把数据复制到各个节点（Entity Replication）？



3. 如何保证过程是安全的（Safety）？



当网络出现分区，部分节点失联的情况下，分布式共识算法是如何运作的？

1. Quorum 机制，只要仍能正常运作的节点数保持在半数以上，那么分布式系统就仍然能正常运行。
2. 因为存在 Quorum 机制，即一个节点的提案得得到大多数节点的批准才行，所以在出现“脑裂”的情况下，节点半数以下的分区，所有接受到变更请求，都不会成功提交。



当故障恢复，网络分区接触，节点重新上线时，节点集群的数据如何保持一致？





Raft 是如何解决“脑裂”的？





分布式算法要着重解决的问题？

1. 系统内部各个节点的通信是不可靠的



2. “分布式环境下并发操作的共享数据”



着重介绍 Raft 协议

- redis 的 主从切换过程的中，哨兵节点如何达成共识？通过一个类 Raft 协议实现的

- 拿出具体实现来看，蚂蚁金服的 Raft 实现，以及 github 上的 raft 实现开源



简单介绍下 ZAB 协议













