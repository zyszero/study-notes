# 【斯坦福编译原理】22 错误处理

## 编译器如何处理错误？

### 编译器的职责

编译器的两种不同职责与例子：

![](.\images\22-编译器两种不同职责与例子.png)

### 错误处理器的要求

错误处理器的要求：

![](.\images\22-编译器错误处理的要求.png)

### 错误处理的策略

错误处理的策略：

- Panic mode：紧急模式，最简单、最常用的错误恢复方法
- Error productions：错误产生式
- Automatic local or global correction：自动局部或全局校正

#### Panic mode

Panic mode 的基本思路是当一个错误被检测时，解析器会开始抛弃token直到在这门语言中我到一个作用明确的token为止，编译器会试着自己重启。然后从那个点继续工作。

![](.\images\22-Panic mode 处理错误的例子.png)

Panic mode 会丢弃第二个`+`，继续编译下去，直至遇到解析器可以识别的字符

#### Error Productions

![](.\images\22-Error Productions与例子.png)**Error Productions：**它将程序员常犯的已知错误指定为语法中的替代产生式（编译器设计者可能知道代码中可能出现的一些常见错误。也可以使用增强语法作为在遇到这些错误时生成错误结构的产品）

#### Automatic local or global correction

![](.\images\22-Automatic local or global correction.png)

![](.\images\22-过去与现在的编译需求对比.png)

从图中可以看出，不使用**Automatic local or global correction**的原因。